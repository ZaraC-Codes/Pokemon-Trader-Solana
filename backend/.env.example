# ============================================================
# REVENUE PROCESSOR — Backend Service Configuration
# ============================================================
# Copy this file to .env and fill in all required values.
# NEVER commit .env or any keypair files to git!

# ── Solana Network ──────────────────────────────────────────
SOLANA_RPC_URL=https://api.devnet.solana.com
POKEBALL_GAME_PROGRAM_ID=B93VJQKD5UW8qfNsLrQ4ZQvTG6AG7PZsR6o2WeBiboBZ

# ── Token Mints ─────────────────────────────────────────────
# SolCatch token mint (SOLCATCH) — the game's payment token (required)
# Devnet: DCZFYnvkeXhkpx8CkXECNs3nFMUZG2iXSBxA7ozHKiPL (9 decimals)
SOLBALLS_MINT=your_solballs_mint_pubkey

# USDC mint
# Devnet:  Gh9ZwEmdLJ8DscKNTkTqPbNwLNNBjuSzaG9Vp2KGtKJr
# Mainnet: EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
USDC_MINT=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v

# ── Wallets ─────────────────────────────────────────────────
# Backend wallet private key (base58, JSON array, or path to keypair file)
# This wallet:
#   - Must be the game program's authority
#   - Receives withdrawn SolBalls
#   - Executes Jupiter swaps
#   - Calls Gacha API
#   - Deposits NFTs into vault
BACKEND_WALLET_PRIVATE_KEY=./keys/revenue-processor.json

# Treasury wallets — each receives 1.5% of revenue as USDC (3% total, split 50/50)
TREASURY_WALLET_A=your_treasury_wallet_a_pubkey
TREASURY_WALLET_B=your_treasury_wallet_b_pubkey

# ── Revenue Split ───────────────────────────────────────────
# Percentages must total 100
# Treasury (3%): split 50/50 between TREASURY_WALLET_A and TREASURY_WALLET_B as USDC
# NFT Pool (96%): stays in backend wallet as USDC, funds Gacha pack purchases
# Reserves (1%): swapped from USDC to SOL for backend gas fees (Gacha, deposit_nft, etc.)
REVENUE_TREASURY_PCT=3
REVENUE_NFT_POOL_PCT=96
REVENUE_RESERVES_PCT=1

# ── Jupiter Aggregator ──────────────────────────────────────
JUPITER_BASE_URL=https://lite-api.jup.ag/swap/v1
# Optional: Jupiter Pro API key for higher rate limits
JUPITER_API_KEY=
# Max slippage in basis points (100 = 1%)
JUPITER_SLIPPAGE_BPS=100

# ── Collector Crypt Gacha API ───────────────────────────────
# Devnet:  https://dev-gacha.collectorcrypt.com
# Mainnet: https://gacha.collectorcrypt.com
GACHA_API_URL=https://dev-gacha.collectorcrypt.com
GACHA_API_KEY=your_gacha_api_key

# ── Thresholds ──────────────────────────────────────────────
# Minimum SolCatch balance to trigger a swap (atomic units, 9 decimals)
# 100 SOLCATCH = 100_000_000_000
MIN_SOLBALLS_TO_SWAP=100000000000

# USDC cost per Gacha pack (atomic units, 6 decimals)
# $50 = 50_000_000
PACK_COST_USDC=50000000

# Minimum packs to purchase per run
MIN_PACKS_PER_RUN=1

# ── Address Lookup Table (ALT) ────────────────────────────
# Vault ALT address — created by scripts/solana/create-vault-alt.ts
# Required if vault holds > 7 NFTs. Optional otherwise.
# When configured, nftDepositor will extend the ALT after each deposit.
VAULT_ALT_ADDRESS=

# ── Scheduler ───────────────────────────────────────────────
# Cron interval in milliseconds (default: 5 minutes)
CRON_INTERVAL_MS=300000

# ── Admin API ───────────────────────────────────────────────
# Shared secret for admin endpoints (X-ADMIN-KEY header)
ADMIN_API_KEY=your_admin_api_key_here

# HTTP port
PORT=3001
